{% extends 'layout/base.html' %}

{% block title %}Live Wedding - Ben and Lindsay{% endblock %}

{% block content %}
<div id="main_content" class="container-fluid">
  <div class="row mb-2">
    <!-- filter options -->
    <!-- <div class="">
      <select id="filter_dropdown" class="form-select">
        <option selected>Open this select menu</option>
        <option value="ascending">ascending</option>
        <option value="descending">descending</option>
      </select>
    </div> -->
    <!-- photos -->
    {% for obj in object_list %}
    <div class="col-md-4 col-xs-12 d-flex align-items-center justify-content-center">
      <figure class="figure">
        <img src="{{ obj.img.url }}" class="img-fluid border rounded-3" alt="" style="max-height:500px">
        <figcaption class="figure-caption text-center">{{ obj.caption }}</figcaption>
      </figure>
    </div>
    {% empty %}
    <div class="col">
      <p>No Photos Uploaded.</p>
    </div>
    {% endfor %}


    <div class="pagination d-flex justify-content-end">
        <span class="step-links">
          <ul class="pagination">
            <!-- first page -->
            <!-- <li class="page-item"><a class="page-link" href="?page=1">first</a></li> -->
            {% if page_obj.has_previous %}
            <li class="page-item">
              <a class="page-link" href="?page={{ page_obj.previous_page_number }}">previous</a>
            </li>
            {% endif %}

            {% for page in page_obj.paginator.page_range %}
              {% if page == page_obj.number %}
                <li class="page-item active" aria-current="page">
                  <a class="page-link" href="?page={{ page }}">{{ page }}</a>
                </li>
              {% else %}
                <li class="page-item"><a class="page-link" href="?page={{ page }}">{{ page }}</a></li>
              {% endif %}
            {% endfor %}
            <!-- <span class="current">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
            </span> -->

            {% if page_obj.has_next %}
            <li class="page-item">
              <a class="page-link" href="?page={{ page_obj.next_page_number }}">next</a>
            </li>
            {% endif %}
            <!-- last page -->
            <!-- <li class="page-item"><a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">last</a></li> -->
          </ul>
        </span>
    </div>
  </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content"></div>
  </div>
</div>
{% endblock  %}


{% block javascript %}
<script type="text/javascript">
  function filter_photos(filter_selection) {
    $.ajax({
      url : "{% url 'layout:index' %}",
      type : 'GET',
      data : {
          'filter':filter_selection
      },
      // dataType:'json',
      success : function(data) {
          // alert('Data: '+data);
      },
    });
  }
$(document).ready(function() {

  $("#filter_dropdown").change(function () {
     filter_photos($('#filter_dropdown').val())
  });

  $("#upload_photo_btn").modalForm({
      formURL: "{% url 'photos:photo_create' %}"
  });

});
</script>
{% endblock %}
